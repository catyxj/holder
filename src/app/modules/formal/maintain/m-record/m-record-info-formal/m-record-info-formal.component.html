<!--<div class="bread">
  维保管理 <span> / </span>维保记录
</div>-->

<div class="content">
  <div class="list_head">
    <div class="li_head_l">
     <h6>维保详情</h6>
    </div>
    <div class="li_head_r">
      <!--返回-->
      <button class="btn btn_purple-o btn_round bps" [routerLink]="['/admin/formal/maintenance-record/list', {page: listPage}]">
        <i class="iconfont iconicon_comeback1"></i>
      </button>
      <!--<button class="btn btn_purple btn_round bpm ml-3" (click)="deleteData()">
        删除
      </button>
      -->
    </div>
  </div>

  <div class="info_content">
    <div class="flex record_info">
      <div>
        <div class="r_info_item">
          <div class="r_info_label">
            维保编号：
          </div>
          <div class="r_info_value">
            {{info?.label}}
          </div>
        </div>

        <div class="r_info_item">
          <div class="r_info_label">
            设备名称：
          </div>
          <div class="r_info_value">
            {{info?.ept_name}}
          </div>
        </div>

        <div class="r_info_item">
          <div class="r_info_label">
            维保人员：
          </div>
          <div class="r_info_value">
            {{info?.upload_name}}
          </div>
        </div>
      </div>

      <div>
        <div class="r_info_item">
          <div class="r_info_label">
            维保模板：
          </div>
          <div class="r_info_value">
            {{info?.template_label}}（{{info?.template_name}}）
          </div>
        </div>

        <div class="r_info_item">
          <div class="r_info_label">
            终端编码：
          </div>
          <div class="r_info_value">
            {{info?.terminal_code}}
          </div>
        </div>

        <div class="r_info_item">
          <div class="r_info_label">
            提交时间：
          </div>
          <div class="r_info_value">
            {{info?.created_at}}
          </div>
        </div>
      </div>
    </div>

    <div class="record_table">
      <table class="table table-bordered">
        <thead>
        <tr>
          <th>
            序号
          </th>
          <th>
            描述
          </th>
          <th>
            状态
          </th>
          <th>
            备注
          </th>
          <th>
            图片
          </th>
        </tr>
        </thead>

        <tbody>
        <tr *ngFor="let item of dataList; let n = index;">
          <td> {{ n+1 }} </td>
          <td style="font-weight: bold; color:#666EE8;"> {{ item.name }} </td>
          <td>
            <div *ngIf="!item.result" class="i_row">
              <div class="r_circle green">
                <div class="r_circle_in"></div>
              </div>
              正常
            </div>
            <div *ngIf="item.result" class="i_row">
              <div class="r_circle warning">
                <div class="r_circle_in"></div>
              </div>
              异常
            </div>
          </td>
          <td>
            {{item.remark || '无'}}
          </td>
          <td>
            <span *ngIf="!item.img || item.img.length <= 0">无</span>
            <!--<span *ngFor="let img of item.imgList; let n = index;">
              <a href="{{img}}" download="图片{{ n+1 }}">图片{{ n+1 }}</a>
            </span>-->
            <span *ngFor="let img of item.img; let n = index;" (click)="preview(img.oss_path)" class="m-r-img">
              <img src="{{img.oss_path}}" alt="">
              <!--<a>图片{{ n+1 }}</a>-->
            </span>
          </td>
        </tr>

        </tbody>
      </table>
    </div>

    <!--缩略图-->
    <nz-modal
      [nzVisible]="previewVisible"
      [nzContent]="modalContent"
      [nzFooter]="null"
      (nzOnCancel)="previewVisible = false"
    >
      <ng-template #modalContent>
        <img [src]="previewImage" [ngStyle]="{ width: '100%' }" />
      </ng-template>
    </nz-modal>

  </div>

</div>




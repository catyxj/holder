<!--<div class="bread">
  信息维护 <span> / </span>用户管理
</div>-->

<div class="content">
  <div class="list_head">
    <div class="li_head_l">
      <h6>
        用户详情
      </h6>
    </div>
    <div class="li_head_r">
      <!--返回-->
      <button class="btn btn_purple-o btn_round bps" [routerLink]="['/admin/formal/users/list', {page: listPage}]">
        <i class="iconfont iconicon_comeback1"></i>
      </button>
      <!--刷新-->
      <button class="btn btn_purple-o btn_round bps ml-1" (click)="searchChange(); getInfo();">
        <i class="iconfont iconicon_Refresh"></i>
      </button>

    </div>
  </div>

  <div class="content_h2">
    <div class="h2_row">
      <div class="h2_col">
        <div class="h2_col_title">手机号码</div>
        <div class="h2_col_value">
          {{info?.username}}
        </div>
      </div>

      <div class="h2_col">
        <div class="h2_col_title">用户名</div>
        <div class="h2_col_value">
          {{info?.name}}
        </div>
      </div>


      <div class="h2_col">
        <div class="h2_col_title">所属单位</div>
        <div class="h2_col_value">
          {{info?.org_name}}
        </div>
      </div>

      <div class="h2_col">
        <div class="h2_col_title">单位类型</div>
        <div class="h2_col_value">
          <span *ngIf="info&&info.org_tag===1">
            产品使用
          </span>
          <span *ngIf="info&&info.org_tag===2">
            产品制造
          </span>
          <span *ngIf="info&&info.org_tag===3">
            产品运维
          </span>
          <span *ngIf="info&&info.org_tag===4">
            组件供应
          </span>
          <span *ngIf="info&&info.org_tag===5">
            监管机构
          </span>
        </div>
      </div>

      <div class="h2_col">
        <div class="h2_col_title">地域地址</div>
        <div class="h2_col_value">
          {{info?.location_name}}
        </div>
      </div>

      <div class="h2_col">
        <div class="h2_col_title">邮箱地址</div>
        <div class="h2_col_value">
          {{info?.email}}
        </div>
      </div>

    </div>
  </div>

  <div class="list_content">
    <div class="content_h">
      <div class="search_box">
        <nz-input-group [nzAddOnBefore]="addOnBeforeTemplate" [nzSuffix]="addOnAfterTemplate">
          <input type="text" nz-input [(ngModel)]="value" (keyup)="searchEnter($event)" maxlength="15"/>
        </nz-input-group>
        <ng-template #addOnBeforeTemplate>
          <nz-select [(ngModel)]="search">
            <nz-option [nzLabel]="'设备名称'" [nzValue]="'name'"></nz-option>
            <nz-option [nzLabel]="'终端编码'" [nzValue]="'terminal_code'"></nz-option>
            <nz-option [nzLabel]="'地域地址'" [nzValue]="'address'"></nz-option>
            <nz-option [nzLabel]="'使用单位'" [nzValue]="'user_org'"></nz-option>
          </nz-select>
        </ng-template>
        <ng-template #addOnAfterTemplate>
          <img src="assets/icons/icon_seach.png" alt="" class="search_icon" (click)="searchChange()">
        </ng-template>

      </div>

      <div class="flex">


      </div>
    </div>

    <div class="content_t" style="height: 360px;">
      <nz-table
        #dataTable
        [nzFrontPagination]="false"
        [nzShowPagination] = "false"
        [nzLoading]="loading"
        [nzData]="dataLists"
      >
        <thead>
        <tr>
          <!--<th
            nzShowCheckbox
            [(nzChecked)]="isAllChecked"
            (nzCheckedChange)="checkAll($event)"
          >
          </th>-->
          <th>设备名称</th>
          <th>终端编码</th>
          <th>地域地址</th>
          <th>使用单位</th>
          <th>
            <nz-dropdown [nzTrigger]="'click'">
              <a nz-dropdown>
                连接状态
                <i nz-icon type="down" style="color: #898EA3;"></i>
              </a>

              <ul nz-menu>
                <li nz-menu-item (click)="searchOnline('')">
                  <a>全部</a>
                </li>
                <li nz-menu-item (click)="searchOnline('true')">
                  <a>已联网</a>
                </li>
                <li nz-menu-item (click)="searchOnline('false')">
                  <a>未联网</a>
                </li>
              </ul>
            </nz-dropdown>
          </th>
          <th>
            <nz-dropdown [nzTrigger]="'click'">
              <a nz-dropdown>
                设备状态
                <i nz-icon type="down" style="color: #898EA3;"></i>
              </a>

              <ul nz-menu>
                <li nz-menu-item (click)="searchRun('')">
                  <a>全部</a>
                </li>
                <li nz-menu-item (click)="searchRun('0')">
                  <a>未知</a>
                </li>
                <li nz-menu-item (click)="searchRun('1')">
                  <a>未运行</a>
                </li>
                <li nz-menu-item (click)="searchRun('2')">
                  <a>运行</a>
                </li>
                <li nz-menu-item (click)="searchRun('3')">
                  <a>告警</a>
                </li>
                <li nz-menu-item (click)="searchRun('4')">
                  <a>故障</a>
                </li>
              </ul>
            </nz-dropdown>
          </th>
          <th>
            <nz-dropdown [nzTrigger]="'click'">
              <a nz-dropdown>
                使用状态
                <i nz-icon type="down" style="color: #898EA3;"></i>
              </a>

              <ul nz-menu>
                <li nz-menu-item (click)="searchStatus('')">
                  <a>全部</a>
                </li>
                <li nz-menu-item (click)="searchStatus('1')">
                  <a>正常</a>
                </li>
                <li nz-menu-item (click)="searchStatus('2')">
                  <a>禁用</a>
                </li>
              </ul>
            </nz-dropdown>
          </th>
          <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let data of dataTable.data">
          <!--<td
            nzShowCheckbox
            [(nzChecked)]="data.checked"
            [nzDisabled]="data.disabled"
            (nzCheckedChange)="refreshStatus()"
          ></td>-->
          <td> {{data.name}} </td>
          <td> {{data.terminal_code}} </td>
          <td> {{data.location_name}} </td>
          <td> {{data.user_org}} </td>
          <td>
            <nz-tag [nzColor]="'#1E9FF2'" *ngIf="data.online">已联网</nz-tag>
            <nz-tag [nzColor]="'#C0C4D2'" *ngIf="!data.online">未联网</nz-tag>
          </td>
          <td>
            <span *ngIf="!data.online">
              <img src="assets/icons/group_0.png" alt="">
              未知
            </span>
            <span *ngIf="data.online && !data.run">
              <img src="assets/icons/group_4.png" alt="">
              未运行
            </span>
            <span *ngIf="data.online && data.run">
              <img src="assets/icons/group_2.png" alt="">
              运行
            </span>
            <span *ngIf="data.online && data.alarm_count>0" class="ml-2">
              <img src="assets/icons/group_1.png" alt="">
              告警
            </span>
            <span *ngIf="data.malfunction" class="ml-2">
              <img src="assets/icons/group_3.png" alt="">
              故障
            </span>
          </td>
          <td>
            <span *ngIf="data.status === 0">
              正常
            </span>
            <span *ngIf="data.status === 1" style="color: #BE1414;">
              禁用
            </span>
          </td>
          <td>
            <a class="btn btn_purple btn-sm" [routerLink]="['/admin/ordinary/runtime', data.uid]" target="_blank" >
              进入
            </a>
          </td>
        </tr>
        </tbody>
      </nz-table>
    </div>

    <ng-template #totalTemplate let-total> 共计 {{ totalItems }} 项 </ng-template>

    <div class="content_b">
      <nz-pagination nzShowSizeChanger
                     [nzTotal]="totalItems"
                     [nzShowTotal]="totalTemplate"
                     [(nzPageIndex)]="page"
                     [(nzPageSize)]="pageSize"
                     (nzPageIndexChange)="pageChange()"
                     (nzPageSizeChange)="pageSizeChange()"
                     [nzPageSizeOptions] = "pageSizeList">

      </nz-pagination>
      <div class="ant-pagination-options-quick-jumper"> 跳至
        <input type="number" [(ngModel)]="pageNum"> 页 </div>
      <button (click)="goPage()" nz-button class="btn_purple ml-3">跳转</button>
    </div>

  </div>

</div>






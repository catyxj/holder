
<div class="modal-header">
  <h4 class="modal-title">
    <img src="assets/icons/maintain_num.png" alt="" style="margin-right: 19px;">
    维保记录
  </h4>
</div>

<div class="modal-body m_form">
  <div class="record_info">
    <div class="mp_row">
      <div class="r_info_item">
        <b class="mp_a_label">
          设备终端：
        </b>
        <div class="mp_a_value">
          {{info?.terminal_code}}（{{info?.ept_name}}）
        </div>
      </div>

      <div class="r_info_item">
        <b class="mp_a_label">
          维保模版：
        </b>
        <div class="mp_a_value">
          {{info?.template_label || '无'}}（{{info?.template_name || '无'}}）
        </div>
      </div>
    </div>

    <div class="mp_row">
      <div class="r_info_item">
        <b class="mp_a_label">
          维保人员：
        </b>
        <div class="mp_a_value">
          {{info?.upload_name}}
        </div>
      </div>

      <div class="r_info_item">
        <b class="mp_a_label">
          提交时间：
        </b>
        <div class="mp_a_value">
          {{info?.created_at | date: 'yyyy-MM-dd HH:mm:ss'}}
        </div>
      </div>
    </div>

  </div>

  <div class="maintain_modal">
    <table class="table table-bordered">
      <thead>
      <tr>
        <th>
          序号
        </th>
        <th>
          描述
        </th>
        <th>
          状态
        </th>
        <th>
          备注
        </th>
        <th>
          图片
        </th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let item of dataList; let n = index;">
        <td> {{ n+1 }} </td>
        <td style=" color:#666EE8;"> {{ item.name }} </td>
        <td>
          <div *ngIf="!item.result" class="i_row">
            <div class="r_circle green">
              <div class="r_circle_in"></div>
            </div>
            正常
          </div>
          <div *ngIf="item.result" class="i_row">
            <div class="r_circle warning">
              <div class="r_circle_in"></div>
            </div>
            异常
          </div>
        </td>
        <td style="font-size: 12px;">
          {{item.remark }}
        </td>
        <td>
          <!--<span *ngIf="!item.imgList || item.imgList.length <= 0">无</span>-->
          <!--<span *ngFor="let img of item.imgList; let n = index;">
            <a href="{{img}}" download="图片{{ n+1 }}">图片{{ n+1 }}</a>
          </span>-->
          <span *ngFor="let img of item.img; let n = index;" (click)="preview(img.oss_path)" class="m-r-img">
              <img src="{{img.oss_path}}" alt="">
            <!--<a>图片{{ n+1 }}</a>-->
            </span>
        </td>
      </tr>

      </tbody>
    </table>
  </div>

  <!--缩略图-->
  <nz-modal
    [nzVisible]="previewVisible"
    [nzContent]="modalContent"
    [nzFooter]="null"
    (nzOnCancel)="previewVisible = false"
  >
    <ng-template #modalContent>
      <img [src]="previewImage" [ngStyle]="{ width: '100%' }" />
    </ng-template>
  </nz-modal>

</div>

<div class="modal-footer">
  <button type="button" class="btn btn_purple" (click)="activeModal.dismiss('close')">关 闭</button>
  <!--<button type="button" class="btn btn_purple" style="margin-left: 35px;" (click)="save()">确 定</button>-->
</div>









<div class="lifeList">

  <div class="t_content">
    <table class="table">
      <thead class="bg_light_primary">
      <th>
        <div class="checkbox c-checkbox white">
          <label>
            <input type="checkbox" [(ngModel)]="allDelete" (change)="allDel();">
            <span class="fa fa-check"></span></label>
        </div>
      </th>
      <th> 组件名称 </th>
      <th> 安装日期 </th>
      <th> 质保时间 </th>
      <th> 当前状态 </th>
      <th> 操作 </th>
      </thead>
      <tbody>
      <tr *ngFor="let data of lifeList; let i = index">
        <td>
          <div class="checkbox c-checkbox">
            <label>
              <input type="checkbox" [(ngModel)]="data.checkDelete" (change)="checkDel(data);">
              <span class="fa fa-check"></span></label>
          </div>
        </td>
        <td> {{ data.name }}  </td>
        <td> {{ data.CreatedDate | date: 'yyyy-MM-dd hh:mm:ss' }} </td>
        <td>
          {{ data. period }}
          月
        </td>
        <td style="display: flex; justify-content:center; align-items:center;">
          <span>
            {{ data.percent*100 }} %
          </span>

          <div class="status_bar">
            <div class="status_bar_in" [ngStyle]="{'background-color': data.percent>0.05 ? '#52c41a' : 'red', 'width': data.percent*100+'%' }"></div>
          </div>
          <span style="color: #52c41a" *ngIf="data.percent>0.05">
            正常
          </span>
          <span style="color: darkorange" *ngIf="data.percent<=0.05 && data.percent>0">
            即将过期
          </span>
          <span style="color: red" *ngIf="data.percent<=0">
            过期
          </span>
          <a style="color: #00a4ff; margin-left: 10px;" *ngIf="data.percent<=0" (click)="contact()">
            联系厂家
          </a>

        </td>
        <td>
          <!--<a [routerLink]="['/admin/runtime/'+ uid + '/' + name + '/maintain/view', data.Uid, data.CreatedDate, data.CreatedBy.Name]" target="malfunction"
             class="btn btn_info btn-sm" style="color: #ffffff;">
            查看
          </a>-->

          <button class="btn btn_info btn-sm" (click)="edit(data)">
            修改
          </button>

        </td>
      </tr>
      </tbody>
    </table>
    <p class="text-muted" *ngIf="!lifeList||lifeList.length===0">
      无有效数据
    </p>
  </div>


  <div class="t_bottom">

    <div class="pull-left" >
      <button class="btn btn_info" (click)="deleteG()"
              nz-button [nzLoading]="isLoading">
        批量删除
      </button>

      <button class="btn btn_info ml-3" (click)="add()">
        新增组件
      </button>

    </div>

    <ngb-pagination class="pull-right"
                    [collectionSize]="totalItems"
                    [pageSize]="pageSize" [(page)]="page"
                    [maxSize]="3" [rotate]="true" [boundaryLinks]="false"
                    (pageChange)="pageChange()">

    </ngb-pagination>
    <div class="pull-right mr-3">
      <select [(ngModel)]="pageSize" class="form-control" (change)="pageSizeChange()">
        <option value="10">10</option>
        <option value="50">50</option>
        <option value="100">100</option>
      </select>
    </div>
    <div class="pull-right mr-3" style="line-height: 33px;"> 共 {{totalItems}} 项</div>
  </div>

</div>


